<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Testing the project &mdash; RobotCLuedo 1.0.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/assets/jsonview.bundle.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx-needs/libs/html/datatables.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx-needs/common.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx-needs/modern.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx-needs/layouts.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx-needs/styles.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/assets/jsonview.bundle.js"></script>
        <script src="../_static/assets/jsonview_loader.js"></script>
        <script src="../_static/sphinx-needs/libs/html/datatables.min.js"></script>
        <script src="../_static/sphinx-needs/libs/html/datatables_loader.js"></script>
        <script src="../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="HOW TO – twist keyboard" href="twist-keyboard.html" />
    <link rel="prev" title="YAML and Sphinx" href="sphinx-yaml.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> RobotCLuedo
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">README</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../README.html">the project main README</a></li>
<li class="toctree-l1"><a class="reference internal" href="../_uml/arch.html">UML overall arch</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Packages Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../robocluedo_armor_msgs/index.html">PKG DOCS – robocluedo_armor_msgs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robocluedo_armor/index.html">PKG DOCS – robocluedo armor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robocluedo_rosplan/index.html">PKG DOCS – robocluedo_rosplan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robocluedo_rosplan_msgs/index.html">PKG DOCS – robocluedo_rosplan_msgs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robocluedo_movement_controller/index.html">PKG DOCS – robocluedo_movement_controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robocluedo_movement_controller_msgs/index.html">PKG DOCS – robocluedo_movement_msgs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robocluedo_module_testing/index.html">PKG DOCS – RoboCLuedo Module Testing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Dependencies Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../robocluedo_dependencies/_docs/erl2-oracle-user-manual.html">Oracle (for the ERL project no.2) – User Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robocluedo_dependencies/_docs/robocluedo-urdf-user-manual.html">the RoboCLuedo Project no.2 – robot URDF model – User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../robocluedo_dependencies/_docs/worlds-user-manual.html">WORLDS – a collection of Gazebo World Files</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Documents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="catkin-notes.html">Notes about Catkin</a></li>
<li class="toctree-l1"><a class="reference internal" href="cpp-docs-template.html">Documentation for c++ nodes and libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev-log.html">RoboCLuedo – Development Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="how-to-setup-doxy-sphinx-ws.html">How to setup a Doxygen/Sphinx workspace</a></li>
<li class="toctree-l1"><a class="reference internal" href="how-to-setup-doxy-sphinx-ws.html#sphinx-config-file-configuration">Sphinx – config file configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest-directives.html">ReStructured Directives – practical documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="run-the-project.html">How to Run this Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinx-mock.html">Sphinx for Py – modules mocking</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinx-yaml.html">YAML and Sphinx</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Testing the project</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="twist-keyboard.html">HOW TO – twist keyboard</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">General Code Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_examples/examples-index.html">Code Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extensions and other references</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../_ext/plant-uml-reference.html">PlantUML quick reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">RobotCLuedo</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Testing the project</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_docs/test-the-project.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="testing-the-project">
<h1>Testing the project<a class="headerlink" href="#testing-the-project" title="Permalink to this heading"></a></h1>
<div class="toctree-wrapper compound">
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Testing the project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#before-proceeding">before proceeding</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing-pkg-robocluedo-armor">TESTING PKG robocluedo_armor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pure-test-on-armor">pure test on aRMOR</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tesing-armor-tools">tesing aRMOR tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-armor-cluedo">Testing aRMOR cluedo</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#testing-pkg-robocluedo-rosplan">TESTING PKG robocluedo_rosplan</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pddl-model">PDDL model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simple-rosplan-pipeline">simple ROSPlan pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rosplan-replanning-and-knowledge-base-update">ROSPlan replanning and knowledge base update</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rosplan-pipeline-manager-with-simulated-actions">ROSPlan pipeline manager with simulated actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rosplan-pipeline-manager-with-simulated-actions-no-launch-file">ROSPlan pipeline manager with simulated actions – NO LAUNCH FILE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-same-test-with-launch-file">the same test with launch file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#testing-pkg-robocluedo-robot">TESTING PKG robocluedo_robot</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#before-the-tests">BEFORE THE TESTS…</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-most-simple-test">the most simple test!</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#testing-pkg-robocluedo-movement-controller">TESTING PKG robocluedo_movement_controller</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#go-to-opint">go to opint</a></li>
<li class="toctree-l3"><a class="reference internal" href="#head-orientation">head orientation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wall-follow-behaviour">wall follow behaviour</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-bug-m-module">the bug_m module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-navigation-manager">testing navigation manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manipulation-controller">manipulation controller</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#testing-rosplan-plus-real-motion-controller">TESTING rosplan plus real motion controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="#final-tests">Final Tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#first-test">first test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#another-test">another test</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tests-outputs">TESTS OUTPUTS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#armor-only">armor only</a></li>
<li class="toctree-l3"><a class="reference internal" href="#armor-with-armor-tools">armor with armor_tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#armor-with-armor-cluedo-and-armor-tools">armor with armor_cluedo and armor_tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rosplan-pddl-model">ROSPlan – PDDL model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">simple ROSPlan pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">???</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p>this document provides useful informations for testing the components of the architecture before running it entirely.</p>
<p><em>this document also contains the expected outputs from the programs</em>, or at least the outputs not too much long.</p>
<div class="section" id="before-proceeding">
<h2>before proceeding<a class="headerlink" href="#before-proceeding" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>be sure that <em>the entire project has been compiled entirely without errors</em>, see the instructions</p></li>
</ul>
</div>
<div class="section" id="testing-pkg-robocluedo-armor">
<h2>TESTING PKG robocluedo_armor<a class="headerlink" href="#testing-pkg-robocluedo-armor" title="Permalink to this heading"></a></h2>
<div class="section" id="pure-test-on-armor">
<h3>pure test on aRMOR<a class="headerlink" href="#pure-test-on-armor" title="Permalink to this heading"></a></h3>
<p>this test lets to understand if aRMOR is doing its work in the correct way.</p>
<p>in the package <code class="docutils literal notranslate"><span class="pre">robocluedo_module_Testing</span></code> there’s a node called <code class="docutils literal notranslate"><span class="pre">test_armor.cpp</span></code> whose job is just to perform the most basic operations on aRMOR. <em>If even this simple script doesn’t work, there’s a problem with your installation of aRMOR</em>.</p>
<p><strong>how to run the test:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># shell 1</span>
roslaunch robocluedo_module_testing test_armor.launch

<span class="c1"># shell 2</span>
rosrun robocluedo_module_testing test_armor
</pre></div>
</div>
<p><strong>NOTE</strong> : this simple test will also create a owl file into the desktop.</p>
</div>
<div class="section" id="tesing-armor-tools">
<h3>tesing aRMOR tools<a class="headerlink" href="#tesing-armor-tools" title="Permalink to this heading"></a></h3>
<p>the class <code class="docutils literal notranslate"><span class="pre">armor_tools</span></code> is the low-level set of services used by the armor interface to work. It provides very simple services, then made more detailed by its child class <code class="docutils literal notranslate"><span class="pre">armor_cluedo</span></code>.</p>
<p><strong>how to run the test:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># shell 1</span>
roslaunch robocluedo_module_testing test_armor.launch

<span class="c1"># shell 2</span>
rosrun robocluedo_module_testing test_armor_tools
</pre></div>
</div>
</div>
<div class="section" id="testing-armor-cluedo">
<h3>Testing aRMOR cluedo<a class="headerlink" href="#testing-armor-cluedo" title="Permalink to this heading"></a></h3>
<p>the class <code class="docutils literal notranslate"><span class="pre">armor_cluedo</span></code> takes into account the specific characteristics of the problem, making the interaction between the system and the ontology even easier.</p>
<p><strong>how to run the test:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># shell 1</span>
roslaunch robocluedo_module_testing test_armor.launch

<span class="c1"># shell 2</span>
rosrun robocluedo_module_testing test_armor_cluedo
</pre></div>
</div>
</div>
</div>
<div class="section" id="testing-pkg-robocluedo-rosplan">
<h2>TESTING PKG robocluedo_rosplan<a class="headerlink" href="#testing-pkg-robocluedo-rosplan" title="Permalink to this heading"></a></h2>
<p>most of the packages here can be tested using simple scripts from a console. no special node is needed.</p>
<div class="section" id="pddl-model">
<h3>PDDL model<a class="headerlink" href="#pddl-model" title="Permalink to this heading"></a></h3>
<p>the model should work well, but to be sure, there’s a simple way to test out it:</p>
<ul>
<li><p>go inside the folder <em>$(find robocluedo_rosplan)/pddl/robocluedo</em> (or better, use <code class="docutils literal notranslate"><span class="pre">roscd</span></code> to find rosplan): here you will find everything needed to test the model</p></li>
<li><p><em>without updating,</em> try to solve the projeb with <code class="docutils literal notranslate"><span class="pre">solve_popf.sh</span></code> : the solution should include only one action, <code class="docutils literal notranslate"><span class="pre">(replan</span> <span class="pre">)</span></code></p></li>
<li><p>open the file <code class="docutils literal notranslate"><span class="pre">robocluedo_problem.pddl</span></code> and replace the goal with this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>:goal <span class="o">(</span>and <span class="o">(</span>dirty <span class="o">)</span> <span class="o">(</span>hint-collected wp1 <span class="o">)</span> <span class="o">(</span>hint-collected wp3 <span class="o">)</span> <span class="o">(</span>at-center <span class="o">)))</span>
</pre></div>
</div>
</li>
<li><p>then, <code class="docutils literal notranslate"><span class="pre">./solve_popf.sh</span></code> will return the entire plan.</p></li>
<li><p>and, finally, remember to restore the previous goal!</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>:goal <span class="o">(</span>not-dirty <span class="o">))</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="simple-rosplan-pipeline">
<h3>simple ROSPlan pipeline<a class="headerlink" href="#simple-rosplan-pipeline" title="Permalink to this heading"></a></h3>
<p>this test aims at testing how the architecture of ROSPlan works without running the pipeline manager nor the other components attached with the ontology. Just to be sure that ROSPlan is working well.</p>
<p>in this test, we’re going to use the <em>RoboCLuedo PDDL model with the Simulated Actions</em>. Use the bash commands here below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># shell 1</span>
roslaunch robocluedo_module_testing load_rosplan_simulated_actions.launch

<span class="c1"># shell 2</span>
rosservice call /rosplan_problem_interface/problem_generation_server
rostopic <span class="nb">echo</span> /rosplan_problem_interface/problem_instance -n <span class="m">1</span> -p
rosservice call /rosplan_planner_interface/planning_server
rostopic <span class="nb">echo</span> /rosplan_planner_interface/planner_output -p -n <span class="m">1</span>
rosservice call /rosplan_parsing_interface/parse_plan
rostopic <span class="nb">echo</span> /rosplan_parsing_interface/complete_plan -n <span class="m">1</span>
rosservice call /rosplan_plan_dispatcher/dispatch_plan <span class="s2">&quot;{}&quot;</span> 
</pre></div>
</div>
</div>
<div class="section" id="rosplan-replanning-and-knowledge-base-update">
<h3>ROSPlan replanning and knowledge base update<a class="headerlink" href="#rosplan-replanning-and-knowledge-base-update" title="Permalink to this heading"></a></h3>
<p>the package robocluedo_rosplan has a fundamental node called <code class="docutils literal notranslate"><span class="pre">kb_interface</span></code> updating the knowledge according to the landmark. It provdes a fundamental funcitonality for performing the replanning, and its architecture is heavily specialized for working with this PDDL.</p>
<p><strong>Notice that</strong> the main node to interact with when using ROSPlan is the pipeline manager, and not this node, <em>which should be hidden in the package</em>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># shell 1</span>
roslaunch robocluedo_module_testing load_rosplan_simulated_actions.launch

<span class="c1"># shell 2</span>
rosrun robocluedo_rosplan kb_interface

<span class="c1"># shell 3</span>
rosservice list <span class="p">|</span> grep update_goal
rosservice list <span class="p">|</span> grep replan

<span class="c1"># many warnings should appear on the ROSPlan console</span>
rosservice call /replan <span class="s2">&quot;{}&quot;</span> 

rosservice call /update_goal <span class="s2">&quot;landmark: 0&quot;</span>
rosservice call /rosplan_problem_interface/problem_generation_server
rosservice call /rosplan_planner_interface/planning_server
rostopic <span class="nb">echo</span> /rosplan_planner_interface/planner_output -p -n <span class="m">1</span>
rosservice call /rosplan_parsing_interface/parse_plan
rosservice call /rosplan_plan_dispatcher/dispatch_plan <span class="s2">&quot;{}&quot;</span> 

<span class="c1"># the robot will go in one wp</span>
rosservice call /update_goal <span class="s2">&quot;landmark: 1&quot;</span>
rosservice call /rosplan_problem_interface/problem_generation_server
rosservice call /rosplan_planner_interface/planning_server
rostopic <span class="nb">echo</span> /rosplan_planner_interface/planner_output -p -n <span class="m">1</span>
rosservice call /rosplan_parsing_interface/parse_plan
rosservice call /rosplan_plan_dispatcher/dispatch_plan <span class="s2">&quot;{}&quot;</span> 

<span class="c1"># if you repeat the test above, the wp gonna change (max 4 times)</span>
<span class="c1"># ...</span>

<span class="c1"># the fifth time the landmark is applied, the kb_interface</span>
<span class="c1">#    should reply with the flag &quot;applicable=false&quot;</span>

<span class="c1"># called the action &quot;solve&quot;</span>
rosservice call /update_goal <span class="s2">&quot;landmark: 2&quot;</span>
rosservice call /rosplan_problem_interface/problem_generation_server
rosservice call /rosplan_planner_interface/planning_server
rostopic <span class="nb">echo</span> /rosplan_planner_interface/planner_output -p -n <span class="m">1</span>
rosservice call /rosplan_parsing_interface/parse_plan
rosservice call /rosplan_plan_dispatcher/dispatch_plan <span class="s2">&quot;{}&quot;</span> 
</pre></div>
</div>
<p>consider that, each time all the waypoints have been explored, the robot must call the service <code class="docutils literal notranslate"><span class="pre">/replan</span></code> to reset its status.</p>
</div>
<div class="section" id="rosplan-pipeline-manager-with-simulated-actions">
<h3>ROSPlan pipeline manager with simulated actions<a class="headerlink" href="#rosplan-pipeline-manager-with-simulated-actions" title="Permalink to this heading"></a></h3>
<p>the main component controlling the ROSPlan architecture is the so called <code class="docutils literal notranslate"><span class="pre">rosplan_pipeline_manager</span></code>. It provides functionalities for doing many things:</p>
<ul class="simple">
<li><p>controlling each part of the planning process, <em>one by one</em></p></li>
<li><p>ease the interaction with the other parts of the system</p></li>
<li><p>returning precide informations about the outcomes of the single pipeline components: indeed the basic ROSPlan architecture doesn’t provide informations about the planning process <em>in a simple way</em>, and sometimes <em>the process to infer what happened inside could be cumbersome for the other parts of the architecture</em>.</p></li>
</ul>
<p>here’s how to test it:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># shell 1
roslaunch robocluedo_module_testing load_rosplan_simulated_actions.launch

# shell 2
rosrun robocluedo_rosplan kb_interface

# shell 3 (a bit slow, wait)
rosrun robocluedo_rosplan rosplan_pipeline_manager.py

# shell 4
rosservice list | grep robocluedo
#    /robocluedo/pipeline_manager

# skip everything
rosservice call /robocluedo/pipeline_manager &quot;{load_problem: false, solve_problem: false, parse_plan: false, execute_plan: false, landmark: 0}&quot; 
# loading only
rosservice call /robocluedo/pipeline_manager &quot;{load_problem: true, solve_problem: false, parse_plan: false, execute_plan: false, landmark: 0}&quot; 
# load + solving
rosservice call /robocluedo/pipeline_manager &quot;{load_problem: true, solve_problem: true, parse_plan: false, execute_plan: false, landmark: 0}&quot; 
# load + solving + parsing
rosservice call /robocluedo/pipeline_manager &quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: false, landmark: 0}&quot; 
# also dispatch
rosservice call /robocluedo/pipeline_manager &quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 0}&quot; 

# landmarks
rosservice call /robocluedo/pipeline_manager &quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 0}&quot; 
rosservice call /robocluedo/pipeline_manager &quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot; 
rosservice call /robocluedo/pipeline_manager &quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 2}&quot; 
</pre></div>
</div>
<p><strong>Notice that</strong> this sequence could ends to a <em>unsolvable problem</em> (it is due to the initial topology), and it makes sense because we’re using just simulated actions:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 0}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 2}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 0}&quot;</span> 
<span class="c1"># UNSOLVABLE</span>
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot;</span> 
</pre></div>
</div>
<p>the topology that generated the unsolvable problem:</p>
<div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="ss">:init</span>
	<span class="p">(</span><span class="nv">dirty</span> <span class="p">)</span>
	
	<span class="p">(</span><span class="nv">is-center</span> <span class="nv">center</span> <span class="p">)</span>
		<span class="p">(</span><span class="nv">not-is-center</span> <span class="nv">wp1</span> <span class="p">)</span> <span class="p">(</span><span class="nv">not-is-center</span> <span class="nv">wp2</span> <span class="p">)</span> 
		<span class="p">(</span><span class="nv">not-is-center</span> <span class="nv">wp3</span> <span class="p">)</span> <span class="p">(</span><span class="nv">not-is-center</span> <span class="nv">wp4</span> <span class="p">)</span>
	
	<span class="p">(</span><span class="nv">at</span> <span class="nv">center</span> <span class="p">)</span> <span class="p">(</span><span class="nv">at-center</span> <span class="p">)</span>
	
	<span class="p">(</span><span class="nv">passage</span> <span class="nv">center</span> <span class="nv">wp1</span> <span class="p">)</span> <span class="p">(</span><span class="nv">passage</span> <span class="nv">wp1</span> <span class="nv">center</span> <span class="p">)</span>
	<span class="c1">;;(passage center wp2 ) (passage wp2 center )</span>
	<span class="c1">;;(passage center wp3 ) (passage wp3 center )</span>
	<span class="p">(</span><span class="nv">passage</span> <span class="nv">center</span> <span class="nv">wp4</span> <span class="p">)</span> <span class="p">(</span><span class="nv">passage</span> <span class="nv">wp4</span> <span class="nv">center</span> <span class="p">)</span>
	<span class="p">(</span><span class="nv">passage</span> <span class="nv">wp1</span> <span class="nv">wp2</span> <span class="p">)</span> <span class="p">(</span><span class="nv">passage</span> <span class="nv">wp2</span> <span class="nv">wp3</span> <span class="p">)</span> <span class="p">(</span><span class="nv">passage</span> <span class="nv">wp3</span> <span class="nv">wp4</span> <span class="p">)</span>
	
	<span class="p">(</span><span class="nv">not-explored</span> <span class="nv">wp1</span> <span class="p">)</span> <span class="p">(</span><span class="nv">not-explored</span> <span class="nv">wp2</span> <span class="p">)</span> <span class="p">(</span><span class="nv">not-explored</span> <span class="nv">wp3</span> <span class="p">)</span> <span class="p">(</span><span class="nv">not-explored</span> <span class="nv">wp4</span> <span class="p">)</span>  
	<span class="p">(</span><span class="nv">explored</span> <span class="nv">center</span> <span class="p">)</span>
	
	<span class="p">(</span><span class="nv">not-hint-collected</span> <span class="nv">wp1</span> <span class="p">)</span>
	<span class="p">(</span><span class="nv">not-hint-collected</span> <span class="nv">wp2</span> <span class="p">)</span>
	<span class="p">(</span><span class="nv">not-hint-collected</span> <span class="nv">wp3</span> <span class="p">)</span>
	<span class="p">(</span><span class="nv">not-hint-collected</span> <span class="nv">wp4</span> <span class="p">)</span>
	<span class="p">(</span><span class="nv">not-hint-ready</span> <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="rosplan-pipeline-manager-with-simulated-actions-no-launch-file">
<h3>ROSPlan pipeline manager with simulated actions – NO LAUNCH FILE<a class="headerlink" href="#rosplan-pipeline-manager-with-simulated-actions-no-launch-file" title="Permalink to this heading"></a></h3>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># shell 1
roslaunch robocluedo_rosplan load_rosplan.launch

# shell 2
rosrun robocluedo_rosplan kb_interface

# shell 3
rosrun robocluedo_module_testing rosplan_simulated_motion_system.py

# shell 4
rosrun robocluedo_rosplan rosplan_pipeline_manager.py

# shell 5
#     landmarks: 0 1 1 1 2 0 1 2

rosservice call /robocluedo/pipeline_manager &quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 0}&quot; 
rosservice call /robocluedo/pipeline_manager &quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot; 
rosservice call /robocluedo/pipeline_manager &quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot; 
rosservice call /robocluedo/pipeline_manager &quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot; 
rosservice call /robocluedo/pipeline_manager &quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 2}&quot;

# ERRORE problema non risolvibile (correttamente segnalato dal pipeline manager)
rosservice call /robocluedo/pipeline_manager &quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot; 

# problema risolvibile
rosservice call /robocluedo/pipeline_manager &quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 0}&quot; 
rosservice call /robocluedo/pipeline_manager &quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot; 
rosservice call /robocluedo/pipeline_manager &quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot; 
rosservice call /robocluedo/pipeline_manager &quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 2}&quot;
</pre></div>
</div>
</div>
<div class="section" id="the-same-test-with-launch-file">
<h3>the same test with launch file<a class="headerlink" href="#the-same-test-with-launch-file" title="Permalink to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># shell 1</span>
roslaunch robocluedo_rosplan run.launch

<span class="c1"># shell 2</span>
rosrun robocluedo_module_testing rosplan_simulated_motion_system.py

<span class="c1"># shell 3</span>
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 0}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 2}&quot;</span>

<span class="c1"># ERRORE problema non risolvibile (correttamente segnalato dal pipeline manager)</span>
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot;</span> 

<span class="c1"># problema risolvibile</span>
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 0}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 2}&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="testing-pkg-robocluedo-robot">
<h2>TESTING PKG robocluedo_robot<a class="headerlink" href="#testing-pkg-robocluedo-robot" title="Permalink to this heading"></a></h2>
<div class="section" id="before-the-tests">
<h3>BEFORE THE TESTS…<a class="headerlink" href="#before-the-tests" title="Permalink to this heading"></a></h3>
<p>make sure to have the updated version of the model.</p>
<ul class="simple">
<li><p>shell: <code class="docutils literal notranslate"><span class="pre">roscd</span> <span class="pre">robocluedo_urdf_model</span></code> and <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">robot</span></code></p></li>
<li><p>run the script <code class="docutils literal notranslate"><span class="pre">./generate_mode.sh</span></code> : the model should appear as console output</p></li>
</ul>
</div>
<div class="section" id="the-most-simple-test">
<h3>the most simple test!<a class="headerlink" href="#the-most-simple-test" title="Permalink to this heading"></a></h3>
<p><em>try and guess?</em> let’s try to … execute the main launch file. You should not see something strange … or, worse, errors or crashes.</p>
<p><strong>first test:</strong> Gazebo only</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>roslaunch robocluedo_robot gazebo.launch
</pre></div>
</div>
<p><strong>second test:</strong> RViz only</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>roslaunch robocluedo_robot demo.launch
</pre></div>
</div>
<p><strong>Third test:</strong> Gazebo and RViz (it should generate loads of warnings on the console … )</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>roslaunch robocluedo_robot demo_gazebo.launch
</pre></div>
</div>
<p>the same launcher, without warnings (not necessairly a good thing…):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>roslaunch robocluedo_robot demo_gazebo.launch <span class="m">2</span>&gt;/dev/null
</pre></div>
</div>
</div>
</div>
<div class="section" id="testing-pkg-robocluedo-movement-controller">
<h2>TESTING PKG robocluedo_movement_controller<a class="headerlink" href="#testing-pkg-robocluedo-movement-controller" title="Permalink to this heading"></a></h2>
<p>the package contains nodes for performing the navigation and the manipulation.</p>
<div class="section" id="go-to-opint">
<h3>go to opint<a class="headerlink" href="#go-to-opint" title="Permalink to this heading"></a></h3>
<p>this py node performs a simple navigation between two points in a path without obstacles.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># shell 1</span>
roslaunch robocluedo_robot gazebo.launch <span class="m">2</span>&gt;/dev/null

<span class="c1"># shell 2 (it takes minimum 4 seconds to start)</span>
rosparam <span class="nb">set</span> des_pos_x <span class="m">0</span>.0
rosparam <span class="nb">set</span> des_pos_y <span class="m">0</span>.0
rosrun robocluedo_movement_controller go_to_point_service_m.py

<span class="c1"># shell 3</span>
rosparam <span class="nb">set</span> des_pos_x <span class="m">2</span>.0
rosparam <span class="nb">set</span> des_pos_y <span class="m">2</span>.0

<span class="c1">#no responding from this</span>
rosservice call /go_to_point_switch <span class="s2">&quot;data: false&quot;</span> 

<span class="c1"># the robot starts moving</span>
rosservice call /go_to_point_switch <span class="s2">&quot;data: true&quot;</span> 

<span class="c1"># a more structured test</span>
rosservice call /go_to_point_switch <span class="s2">&quot;data: false&quot;</span> 
rosparam <span class="nb">set</span> des_pos_x -2.0
rosparam <span class="nb">set</span> des_pos_y -2.0
rosservice call /go_to_point_switch <span class="s2">&quot;data: true&quot;</span> 
sleep <span class="m">20</span>
rosservice call /go_to_point_switch <span class="s2">&quot;data: false&quot;</span> 
rosparam <span class="nb">set</span> des_pos_x -2.0
rosparam <span class="nb">set</span> des_pos_y <span class="m">2</span>.0
rosservice call /go_to_point_switch <span class="s2">&quot;data: true&quot;</span> 
sleep <span class="m">20</span>
rosparam <span class="nb">set</span> des_pos_x <span class="m">2</span>.0
rosparam <span class="nb">set</span> des_pos_y -2.0
rosservice call /go_to_point_switch <span class="s2">&quot;data: true&quot;</span> 
sleep <span class="m">20</span>
rosparam <span class="nb">set</span> des_pos_x <span class="m">2</span>.0
rosparam <span class="nb">set</span> des_pos_y <span class="m">2</span>.0
rosservice call /go_to_point_switch <span class="s2">&quot;data: true&quot;</span> 
sleep <span class="m">20</span>
rosservice call /go_to_point_switch <span class="s2">&quot;data: false&quot;</span> 
</pre></div>
</div>
</div>
<div class="section" id="head-orientation">
<h3>head orientation<a class="headerlink" href="#head-orientation" title="Permalink to this heading"></a></h3>
<p>this node simply rotates the robot of a certain value of radiants.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># shell 1</span>
roslaunch robocluedo_robot gazebo.launch <span class="m">2</span>&gt;/dev/null

<span class="c1"># shell 2 (it takes minimum 4 seconds to start)</span>
rosparam <span class="nb">set</span> des_yaw <span class="m">0</span>.0
rosrun robocluedo_movement_controller head_orientation.py

<span class="c1"># shell 3</span>
rosservice call /head_orient_switch <span class="s2">&quot;data: false&quot;</span>
rosparam <span class="nb">set</span> des_yaw <span class="m">2</span>.0
rosservice call /head_orient_switch <span class="s2">&quot;data: true&quot;</span>
sleep <span class="m">15</span>
rosservice call /head_orient_switch <span class="s2">&quot;data: false&quot;</span>
rosparam <span class="nb">set</span> des_yaw -0.5
rosservice call /head_orient_switch <span class="s2">&quot;data: true&quot;</span>
sleep <span class="m">15</span>
rosservice call /head_orient_switch <span class="s2">&quot;data: false&quot;</span>
rosparam <span class="nb">set</span> des_yaw <span class="m">1</span>.57
rosservice call /head_orient_switch <span class="s2">&quot;data: true&quot;</span>
sleep <span class="m">15</span>
rosservice call /head_orient_switch <span class="s2">&quot;data: false&quot;</span>
rosparam <span class="nb">set</span> des_yaw -1.57
rosservice call /head_orient_switch <span class="s2">&quot;data: true&quot;</span>
sleep <span class="m">15</span>
rosservice call /head_orient_switch <span class="s2">&quot;data: false&quot;</span>
rosparam <span class="nb">set</span> des_yaw <span class="m">3</span>.13
rosservice call /head_orient_switch <span class="s2">&quot;data: true&quot;</span>
sleep <span class="m">15</span>
</pre></div>
</div>
</div>
<div class="section" id="wall-follow-behaviour">
<h3>wall follow behaviour<a class="headerlink" href="#wall-follow-behaviour" title="Permalink to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># shell 1</span>
roslaunch robocluedo_robot gazebo.launch <span class="m">2</span>&gt;/dev/null

<span class="c1"># shell 2 (it takes minimum 4 seconds to start)</span>
rosrun robocluedo_movement_controller wall_follow_service_m.py

<span class="c1"># shell 3</span>
rosservice call /wall_follower_switch <span class="s2">&quot;data: true&quot;</span>
sleep <span class="m">30</span>
rosservice call /wall_follower_switch <span class="s2">&quot;data: false&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="the-bug-m-module">
<h3>the bug_m module<a class="headerlink" href="#the-bug-m-module" title="Permalink to this heading"></a></h3>
<p>the so called bug_m is a navigation controller made up of four nodes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bug_m</span></code> is the main node</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">go_to_point_service_m</span></code> , <code class="docutils literal notranslate"><span class="pre">head_orientation</span></code> and <code class="docutils literal notranslate"><span class="pre">wall_follow_service_m</span></code></p></li>
</ul>
<p>here’s the test:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># shell 1</span>
roslaunch robocluedo_robot gazebo.launch

<span class="c1"># shell 2</span>
rosparam <span class="nb">set</span> des_pos_x <span class="m">0</span>.0
rosparam <span class="nb">set</span> des_pos_y <span class="m">0</span>.0
rosparam <span class="nb">set</span> des_yaw <span class="m">0</span>.0
rosrun robocluedo_movement_controller wall_follow_service_m.py <span class="p">&amp;</span>
rosrun robocluedo_movement_controller go_to_point_service_m.py <span class="p">&amp;</span>
rosrun robocluedo_movement_controller head_orientation.py <span class="p">&amp;</span> 
rosrun robocluedo_movement_controller bug_m.py

<span class="c1"># shell 3</span>
<span class="c1"># rosservice list | grep switch</span>

rosservice call /bug_switch <span class="s2">&quot;data: false&quot;</span> 
rosparam <span class="nb">set</span> des_pos_x <span class="m">2</span>.0
rosparam <span class="nb">set</span> des_pos_y <span class="m">0</span>.0
rosparam <span class="nb">set</span> des_yaw <span class="m">0</span>.0
rosservice call /bug_switch <span class="s2">&quot;data: true&quot;</span> 
sleep <span class="m">15</span>
rosservice call /bug_switch <span class="s2">&quot;data: false&quot;</span> 
rosparam <span class="nb">set</span> des_pos_x <span class="m">0</span>.0
rosparam <span class="nb">set</span> des_pos_y <span class="m">2</span>.0
rosparam <span class="nb">set</span> des_yaw <span class="m">1</span>.57
rosservice call /bug_switch <span class="s2">&quot;data: true&quot;</span> 
sleep <span class="m">15</span>
rosservice call /bug_switch <span class="s2">&quot;data: false&quot;</span> 
rosparam <span class="nb">set</span> des_pos_x -2.0
rosparam <span class="nb">set</span> des_pos_y <span class="m">0</span>.0
rosparam <span class="nb">set</span> des_yaw <span class="m">3</span>.14
rosservice call /bug_switch <span class="s2">&quot;data: true&quot;</span> 
sleep <span class="m">15</span>
rosservice call /bug_switch <span class="s2">&quot;data: false&quot;</span> 
rosparam <span class="nb">set</span> des_pos_x <span class="m">0</span>.0
rosparam <span class="nb">set</span> des_pos_y -2.0
rosparam <span class="nb">set</span> des_yaw -1.57
rosservice call /bug_switch <span class="s2">&quot;data: true&quot;</span> 
sleep <span class="m">15</span>
rosservice call /bug_switch <span class="s2">&quot;data: false&quot;</span> 
</pre></div>
</div>
</div>
<div class="section" id="testing-navigation-manager">
<h3>testing navigation manager<a class="headerlink" href="#testing-navigation-manager" title="Permalink to this heading"></a></h3>
<p>the so called node <em>navigation manager</em> allows</p>
<ul class="simple">
<li><p>to interact with the navigation system making an abstraction between the navigation command and the real component implementing the navigation</p></li>
<li><p>to change at runtine navigation component in order to perform different kinds of movement depending on the situation</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># shell 1</span>
roslaunch robocluedo_robot gazebo.launch <span class="m">2</span>&gt;/dev/null

<span class="c1"># shell 2</span>
roslaunch robocluedo_movement_controller navigation_system.launch

<span class="c1"># shell 3</span>
rosrun robocluedo_movement_controller navigation_manager

<span class="c1">#shell 4</span>

<span class="c1"># this sequence produces a error (it is right!)</span>
rosservice call /navigation_manager/set_algorithm <span class="s2">&quot;algorithm: 0</span>
<span class="s2">enabled: false&quot;</span>

rosservice call /navigation_manager/navigation <span class="s2">&quot;target:</span>
<span class="s2">  x: 1.5</span>
<span class="s2">  y: 2.0</span>
<span class="s2">  yaw: 1.0</span>
<span class="s2">force_enable: false&quot;</span> 

<span class="c1"># this sequence moves the robot</span>
rosservice call /navigation_manager/set_algorithm <span class="s2">&quot;algorithm: 0</span>
<span class="s2">enabled: true&quot;</span>

rosservice call /navigation_manager/navigation <span class="s2">&quot;target:</span>
<span class="s2">  x: -1.5</span>
<span class="s2">  y: 2.0</span>
<span class="s2">  yaw: 1.0</span>
<span class="s2">force_enable: false&quot;</span> 

<span class="c1"># this sequence moves the robot EVEN IF the component has been turned off</span>
rosservice call /navigation_manager/set_algorithm <span class="s2">&quot;algorithm: 0</span>
<span class="s2">enabled: false&quot;</span>

rosservice call /navigation_manager/navigation <span class="s2">&quot;target:</span>
<span class="s2">  x: 1.5</span>
<span class="s2">  y: -2.0</span>
<span class="s2">  yaw: 1.0</span>
<span class="s2">force_enable: true&quot;</span> 
</pre></div>
</div>
</div>
<div class="section" id="manipulation-controller">
<h3>manipulation controller<a class="headerlink" href="#manipulation-controller" title="Permalink to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># shell 1</span>
roslaunch robocluedo_robot demo_gazebo.launch <span class="m">2</span>&gt;/dev/null

<span class="c1"># shell 2</span>
rosrun robocluedo_movement_controller manipulation_controller <span class="m">2</span>&gt;/dev/null

<span class="c1"># shell 3</span>

rosservice list <span class="p">|</span> grep tip
<span class="c1"># /tip_pos</span>

rosservice call /tip_pos <span class="s2">&quot;command: 0&quot;</span> 
sleep <span class="m">2</span>
rosservice call /tip_pos <span class="s2">&quot;command: 1&quot;</span> 
sleep <span class="m">2</span>
rosservice call /tip_pos <span class="s2">&quot;command: 2&quot;</span> 
sleep <span class="m">2</span>
rosservice call /tip_pos <span class="s2">&quot;command: 3&quot;</span> 
sleep <span class="m">2</span>
rosservice call /tip_pos <span class="s2">&quot;command: 4&quot;</span> 
sleep <span class="m">2</span>

<span class="c1"># UNKNOWN POSE</span>
rosservice call /tip_pos <span class="s2">&quot;command: 5&quot;</span> 
sleep <span class="m">2</span>

<span class="c1"># NOT A VALID POSE</span>
rosservice call /tip_pos <span class="s2">&quot;command: 5&quot;</span> 
sleep <span class="m">2</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="testing-rosplan-plus-real-motion-controller">
<h2>TESTING rosplan plus real motion controller<a class="headerlink" href="#testing-rosplan-plus-real-motion-controller" title="Permalink to this heading"></a></h2>
<p>it is the same last test of robocluedo ROSPlan, but this time using the real movement controller.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># shell 1</span>
roslaunch robocluedo_mission_manager run_components.launch <span class="m">2</span>&gt;/dev/null

<span class="c1"># shell 2</span>
rostopic <span class="nb">echo</span> /oracle_hint

<span class="c1"># shell 2</span>
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 0}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 2}&quot;</span>

rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 0}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 1}&quot;</span> 
rosservice call /robocluedo/pipeline_manager <span class="s2">&quot;{load_problem: true, solve_problem: true, parse_plan: true, execute_plan: true, landmark: 2}&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="final-tests">
<h2>Final Tests<a class="headerlink" href="#final-tests" title="Permalink to this heading"></a></h2>
<p><strong>before running these tests</strong> :</p>
<ul>
<li><p>(optional) enable the macros <code class="docutils literal notranslate"><span class="pre">WAITKEY</span></code> in the <code class="docutils literal notranslate"><span class="pre">robocluedo_mission_manager/mission_manager.cpp</span></code> by setting <code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">WAITKEY_ENABLED</span> <span class="pre">true</span></code></p>
<p>the program will stop the execution at each important step</p>
</li>
<li><p>enable the development mode in the oracle located at <code class="docutils literal notranslate"><span class="pre">robocluedo_dependencied_erl2/src/simulation.cpp</span></code> : set <code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">NOT_TESTING</span> <span class="pre">false</span></code></p>
<p>this option says the Oracle to send just the elements of th winner message and not all the other items. keys are selected randomly from the fields of the winner ID.</p>
</li>
</ul>
<div class="section" id="first-test">
<h3>first test<a class="headerlink" href="#first-test" title="Permalink to this heading"></a></h3>
<p>this test allows to see the output from aRMOR.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># shell 1</span>
roslaunch robocluedo_mission_manager run_components.launch <span class="m">2</span>&gt;/dev/null

<span class="c1"># shell 2</span>
roslaunch robocluedo_armor run.launch

<span class="c1"># shell 3</span>
rosrun robocluedo_mission_manager mission_manager
</pre></div>
</div>
</div>
<div class="section" id="another-test">
<h3>another test<a class="headerlink" href="#another-test" title="Permalink to this heading"></a></h3>
<p>this test is used for checking the behaviour of ROSPlan, and in particular of the pipeline manager (which is written in Python unfortunately).</p>
<p><em>this test corresponds to how to run the project.</em></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># shell 1</span>
roslaunch robocluedo_mission_manager run_components_2.launch <span class="m">2</span>&gt;/dev/null

<span class="c1"># shell 2</span>
roslaunch robocluedo_rosplan run.launch

<span class="c1"># shell 3</span>
rosrun robocluedo_mission_manager mission_manager
</pre></div>
</div>
</div>
</div>
<div class="section" id="tests-outputs">
<h2>TESTS OUTPUTS<a class="headerlink" href="#tests-outputs" title="Permalink to this heading"></a></h2>
<div class="section" id="armor-only">
<h3>armor only<a class="headerlink" href="#armor-only" title="Permalink to this heading"></a></h3>
<p><strong>SHELL 1:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>started roslaunch server http://3b17871017fd:43585/

SUMMARY
========

PARAMETERS
 * /cluedo_max_hypotheses: 15
 * /cluedo_path_owlfile: /root/ros_ws/src/...
 * /cluedo_path_owlfile_backup: /root/ros_ws/src/...
 * /cluedo_path_what: /root/ros_ws/src/...
 * /cluedo_path_where: /root/ros_ws/src/...
 * /cluedo_path_who: /root/ros_ws/src/...
 * /rosdistro: noetic
 * /rosversion: 1.15.14

NODES
  /
    armor_service (armor/execute)

auto-starting new master
process[master]: started with pid [1212]
ROS_MASTER_URI=http://localhost:11311

setting /run_id to 7984909e-1b00-11ed-af07-0242ac110002
process[rosout-1]: started with pid [1237]
started core service [/rosout]
process[armor_service-2]: started with pid [1240]
Loading node class: it.emarolab.armor.ARMORMainService
log4j:WARN No appenders could be found for logger (org.ros.internal.node.client.Registrar).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
</pre></div>
</div>
<p><strong>TEST OUTPUT:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>root@3b17871017fd:~/ros_ws/src/erl2-new/robocluedo_module_testing/launch/test_armor# rosrun robocluedo_module_testing test_armor
[ INFO] [1660392484.885474700]: [test_armor] Ontology found! [/root/ros_ws/src/erl2-new/robocluedo_armor/config/cluedo_owl_ontology/cluedo_ontology.owl] 
[ INFO] [1660392484.886339200]: [test_armor] Requiring client [/armor_interface_srv] ...
[ INFO] [1660392484.886751600]: [test_armor] Requiring client [/armor_interface_srv] ... OK
[ INFO] [1660392484.886820800]: [test_armor] Requiring client [/armor_interface_serialized_srv] ...
[ INFO] [1660392484.887235800]: [test_armor] Requiring client [/armor_interface_serialized_srv] ... OK
[ INFO] [1660392484.887399800]: [test_armor] Print Request: 
	client_name : robocluedo
	reference_name : cluedo_ontology
	command : LOAD
	primary_command_spec : FILE
	secondary_command_spec : 
	args : [/root/ros_ws/src/erl2-new/robocluedo_armor/config/cluedo_owl_ontology/cluedo_ontology.owl http://www.emarolab.it/cluedo-ontology false PELLET true ]
	---

[ INFO] [1660392485.926716200]: [test_armor] Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660392485.926796200]: [test_armor] Print Request: 
	client_name : robocluedo
	reference_name : cluedo_ontology
	command : ADD
	primary_command_spec : IND
	secondary_command_spec : CLASS
	args : [Jim PERSON    ]
	---
[ INFO] [1660392485.944448400]: [test_armor] Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660392485.944523700]: [test_armor] Print Request: 
	client_name : robocluedo
	reference_name : cluedo_ontology
	command : ADD
	primary_command_spec : OBJECTPROP
	secondary_command_spec : IND
	args : [who HP3 Jim   ]
	---
[ INFO] [1660392485.955545300]: [test_armor] Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660392485.955632300]: [test_armor] Print Request: 
	client_name : robocluedo
	reference_name : cluedo_ontology
	command : ADD
	primary_command_spec : IND
	secondary_command_spec : CLASS
	args : [Gun WEAPON    ]
	---
[ INFO] [1660392485.962069000]: [test_armor] Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660392485.962144700]: [test_armor] Print Request: 
	client_name : robocluedo
	reference_name : cluedo_ontology
	command : ADD
	primary_command_spec : OBJECTPROP
	secondary_command_spec : IND
	args : [what HP3 Gun   ]
	---
[ INFO] [1660392485.967811800]: [test_armor] Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660392485.967919500]: [test_armor] Print Request: 
	client_name : robocluedo
	reference_name : cluedo_ontology
	command : ADD
	primary_command_spec : IND
	secondary_command_spec : CLASS
	args : [Stadium PLACE    ]
	---
[ INFO] [1660392485.973594300]: [test_armor] Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660392485.973706100]: [test_armor] Print Request: 
	client_name : robocluedo
	reference_name : cluedo_ontology
	command : ADD
	primary_command_spec : OBJECTPROP
	secondary_command_spec : IND
	args : [where HP3 Stadium   ]
	---
[ INFO] [1660392485.981074500]: [test_armor] Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660392485.981191700]: [test_armor] Print Request: 
	client_name : robocluedo
	reference_name : cluedo_ontology
	command : REASON
	primary_command_spec : 
	secondary_command_spec : 
	args : [     ]
	---
[ INFO] [1660392485.992977900]: [test_armor] Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660392485.993068900]: [test_armor] Print Request: 
	client_name : robocluedo
	reference_name : cluedo_ontology
	command : ADD
	primary_command_spec : IND
	secondary_command_spec : CLASS
	args : [Lounge PLACE    ]
	---
[ INFO] [1660392485.998666300]: [test_armor] Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660392485.998737200]: [test_armor] Print Request: 
	client_name : robocluedo
	reference_name : cluedo_ontology
	command : DISJOINT
	primary_command_spec : IND
	secondary_command_spec : 
	args : [Lounge Stadium    ]
	---
[ INFO] [1660392486.015745500]: [test_armor] Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660392486.015854100]: [test_armor] Print Request: 
	client_name : robocluedo
	reference_name : cluedo_ontology
	command : ADD
	primary_command_spec : OBJECTPROP
	secondary_command_spec : IND
	args : [where HP3 Lounge   ]
	---
[ INFO] [1660392486.021397900]: [test_armor] Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660392486.021513800]: [test_armor] Print Request: 
	client_name : robocluedo
	reference_name : cluedo_ontology
	command : REASON
	primary_command_spec : 
	secondary_command_spec : 
	args : [     ]
	---
[ INFO] [1660392486.039751300]: [test_armor] Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660392486.039833600]: [test_armor] Print Request: 
	client_name : robocluedo
	reference_name : cluedo_ontology
	command : SAVE
	primary_command_spec : INFERENCE
	secondary_command_spec : 
	args : [/root/Desktop/ROBOCLUEDO_ONTOLOGY.owl     ]
	---
[ INFO] [1660392486.200656300]: [test_armor] Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660392486.200766100]: [test_armor] closing...
</pre></div>
</div>
</div>
<div class="section" id="armor-with-armor-tools">
<h3>armor with armor_tools<a class="headerlink" href="#armor-with-armor-tools" title="Permalink to this heading"></a></h3>
<p><strong>SHELL 1:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>root@3b17871017fd:~/ros_ws/src/erl2-new/robocluedo_module_testing/launch/test_armor# roslaunch robocluedo_module_testing test_armor.launch
... logging to /root/.ros/log/0cf4f092-1b03-11ed-ad08-0242ac110002/roslaunch-3b17871017fd-15182.log
Checking log directory for disk usage. This may take a while.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is &lt;1GB.

started roslaunch server http://3b17871017fd:32951/

SUMMARY
========

PARAMETERS
 * /cluedo_max_hypotheses: 15
 * /cluedo_path_owlfile: /root/ros_ws/src/...
 * /cluedo_path_owlfile_backup: /root/ros_ws/src/...
 * /cluedo_path_what: /root/ros_ws/src/...
 * /cluedo_path_where: /root/ros_ws/src/...
 * /cluedo_path_who: /root/ros_ws/src/...
 * /rosdistro: noetic
 * /rosversion: 1.15.14

NODES
  /
    armor_service (armor/execute)

auto-starting new master
process[master]: started with pid [15220]
ROS_MASTER_URI=http://localhost:11311

setting /run_id to 0cf4f092-1b03-11ed-ad08-0242ac110002
process[rosout-1]: started with pid [15245]
started core service [/rosout]
process[armor_service-2]: started with pid [15252]
Loading node class: it.emarolab.armor.ARMORMainService
log4j:WARN No appenders could be found for logger (org.ros.internal.node.client.Registrar).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
</pre></div>
</div>
<p><strong>SHELL 2:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>root@3b17871017fd:~/ros_ws/src/erl2-new/robocluedo_module_testing/launch/test_armor# rosrun robocluedo_module_testing test_armor_tools
[ INFO] [1660394502.533233500]: [test_armor_tools] Ontology found! [/root/ros_ws/src/erl2-new/robocluedo_armor/config/cluedo_owl_ontology/cluedo_ontology.owl] 
[ INFO] [1660394502.533945000]: [armor_tools] Requiring client [/armor_interface_srv] ...
[ INFO] [1660394502.534393900]: [armor_tools] -&gt; OK
[ INFO] [1660394503.535600400]: [test_armor_tools] (1) completed hypotheses:
[ INFO] [1660394503.535726200]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	-	&lt;http://www.emarolab.it/cluedo-ontology#HP3&gt;
	sparql_queried_objects : 
	---
[ INFO] [1660394503.541773600]: [test_armor_tools] (1) inconsistent hypotheses:
[ INFO] [1660394503.541849400]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660394503.560990000]:    Print Request: 
	client_name : armor_client
	reference_name : cluedo
	command : DISJOINT
	primary_command_spec : IND
	secondary_command_spec : CLASS
	args : [     ]
	---
[ INFO] [1660394503.561065200]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660394503.578151000]: [test_armor_tools] (2) completed hypotheses:
[ INFO] [1660394503.591825200]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	-	&lt;http://www.emarolab.it/cluedo-ontology#HP3&gt;
	sparql_queried_objects : 
	---
[ INFO] [1660394503.591923700]: [test_armor_tools] (2) inconsistent hypotheses:
[ INFO] [1660394503.597800300]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660394503.610336500]: [test_armor_tools] (3) un disjoint strano:
[ INFO] [1660394503.610436400]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660394503.610522800]: [test_armor_tools] (3) inconsistent hypotheses:
[ INFO] [1660394503.618661100]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660394503.618737000]: [test_armor_tools] query elementi della classe PLACE
[ INFO] [1660394503.637675800]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	-	&lt;http://www.emarolab.it/cluedo-ontology#Study&gt;
	-	&lt;http://www.emarolab.it/cluedo-ontology#Stadium&gt;
	-	&lt;http://www.emarolab.it/cluedo-ontology#Lounge&gt;
	sparql_queried_objects : 
	---
[ INFO] [1660394503.637773600]: [test_armor_tools] query proprieta&#39; di hp3
[ INFO] [1660394503.671939100]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	-	&lt;http://www.emarolab.it/cluedo-ontology#what&gt;
	-	&lt;http://www.emarolab.it/cluedo-ontology#who&gt;
	-	&lt;http://www.emarolab.it/cluedo-ontology#where&gt;
	sparql_queried_objects : 
	---
[ INFO] [1660394503.672028100]: [test_armor_tools] query di tutte le ipotesi
[ INFO] [1660394503.686505400]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	-	&lt;http://www.emarolab.it/cluedo-ontology#Jim&gt;
	-	&lt;http://www.emarolab.it/cluedo-ontology#&gt;
	-	&lt;http://www.emarolab.it/cluedo-ontology#Study&gt;
	-	&lt;http://www.emarolab.it/cluedo-ontology#Gun&gt;
	-	&lt;http://www.emarolab.it/cluedo-ontology#Stadium&gt;
	-	&lt;http://www.emarolab.it/cluedo-ontology#Lounge&gt;
	-	&lt;http://www.emarolab.it/cluedo-ontology#HP3&gt;
	sparql_queried_objects : 
	---
[ INFO] [1660394503.686635900]: [test_armor_tools] query tutte le classi a cui HP3 apartiene
[ INFO] [1660394503.714323400]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	-	&lt;http://www.emarolab.it/cluedo-ontology#COMPLETED&gt;
	-	&lt;http://www.emarolab.it/cluedo-ontology#HYPOTHESIS&gt;
	sparql_queried_objects : 
	---
[ INFO] [1660394503.714410400]: [test_armor_tools] salvataggio
[ INFO] [1660394503.832474000]: [test_armor_tools] THAT&#39;S ALL FOLKS!
</pre></div>
</div>
</div>
<div class="section" id="armor-with-armor-cluedo-and-armor-tools">
<h3>armor with armor_cluedo and armor_tools<a class="headerlink" href="#armor-with-armor-cluedo-and-armor-tools" title="Permalink to this heading"></a></h3>
<p><strong>SHELL 1:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>root@3b17871017fd:~/ros_ws/src/erl2-new/robocluedo_module_testing/launch/test_armor# roslaunch robocluedo_module_testing test_armor.launch
... logging to /root/.ros/log/c81a496a-1b05-11ed-9d7f-0242ac110002/roslaunch-3b17871017fd-27615.log
Checking log directory for disk usage. This may take a while.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is &lt;1GB.

started roslaunch server http://3b17871017fd:43779/

SUMMARY
========

PARAMETERS
 * /cluedo_max_hypotheses: 15
 * /cluedo_path_owlfile: /root/ros_ws/src/...
 * /cluedo_path_owlfile_backup: /root/ros_ws/src/...
 * /cluedo_path_what: /root/ros_ws/src/...
 * /cluedo_path_where: /root/ros_ws/src/...
 * /cluedo_path_who: /root/ros_ws/src/...
 * /rosdistro: noetic
 * /rosversion: 1.15.14

NODES
  /
    armor_service (armor/execute)

auto-starting new master
process[master]: started with pid [27653]
ROS_MASTER_URI=http://localhost:11311

setting /run_id to c81a496a-1b05-11ed-9d7f-0242ac110002
process[rosout-1]: started with pid [27678]
started core service [/rosout]
process[armor_service-2]: started with pid [27685]
Loading node class: it.emarolab.armor.ARMORMainService
log4j:WARN No appenders could be found for logger (org.ros.internal.node.client.Registrar).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
</pre></div>
</div>
<p><strong>SHELL 2:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>root@3b17871017fd:~/ros_ws/src/erl2-new/robocluedo_module_testing/launch/test_armor# rosrun robocluedo_module_testing test_armor_cluedo
[ INFO] [1660394741.152181200]: [test_armor_tools] Ontology found! [/root/ros_ws/src/erl2-new/robocluedo_armor/config/cluedo_owl_ontology/cluedo_ontology.owl] 
[ INFO] [1660394741.152996900]: [armor_tools] Requiring client [/armor_interface_srv] ...
[ INFO] [1660394741.153395100]: [armor_tools] -&gt; OK
[ INFO] [1660394742.072103100]: [test_armor_tools] 


 TEST COMANDI DIRETTI ARMOR 



[ INFO] [1660394742.160877900]: [test_armor_tools] (0) completed hypotheses: (dovrebbe essere vuoto)
[ INFO] [1660394742.160996300]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660394742.170764500]: [test_armor_tools] (0) inconsistent hypotheses: (dovrebbe essere vuoto)
[ INFO] [1660394742.170856100]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660394742.228453400]: [test_armor_tools] (1) completed hypotheses: (dovrebbe comparire un&#39;ipotesi)
[ INFO] [1660394742.228533900]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	-	&lt;http://www.emarolab.it/cluedo-ontology#HP3&gt;
	sparql_queried_objects : 
	---
[ INFO] [1660394742.233656100]: [test_armor_tools] (1) inconsistent hypotheses: (la lista dovrebbe essere vuota)
[ INFO] [1660394742.233725800]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	sparql_queried_objects : 
	---
[ INFO] [1660394742.317583600]: [test_armor_tools] (2) completed hypotheses: (sempre una sola ipotesi)
[ INFO] [1660394742.317663000]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	-	&lt;http://www.emarolab.it/cluedo-ontology#HP3&gt;
	sparql_queried_objects : 
	---
[ INFO] [1660394742.325069700]: [test_armor_tools] (2) inconsistent hypotheses: (dovrebbe spuntare un&#39;ipotesi inconsistente)
[ INFO] [1660394742.325156500]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	-	&lt;http://www.emarolab.it/cluedo-ontology#HP3&gt;
	sparql_queried_objects : 
	---
[ INFO] [1660394742.333623100]: [test_armor_tools] proprieta&#39; where dell&#39;ipotesi HP3:
[ INFO] [1660394742.333695300]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	-	&lt;http://www.emarolab.it/cluedo-ontology#Study&gt;
	-	&lt;http://www.emarolab.it/cluedo-ontology#Stadium&gt;
	sparql_queried_objects : 
	---
[ INFO] [1660394742.333792700]: [test_armor_tools] test esistenza di HP3:
[ INFO] [1660394742.334728000]:    Print Request: 
	client_name : armor_client
	reference_name : cluedo
	command : QUERY
	primary_command_spec : IND
	secondary_command_spec : 
	args : [HP3     ]
	---
[ INFO] [1660394742.377817900]: [test_armor_tools] esiste HP3? (atteso: yes) -&gt; yes
[ INFO] [1660394742.377910200]:    Print Response: 
	success : true
	timeout : false
	exit_code : 0
	error_description : 
	is_consistent : true
	queried_objects :
	-	&lt;http://www.emarolab.it/cluedo-ontology#INCONSISTENT&gt;
	-	&lt;http://www.emarolab.it/cluedo-ontology#COMPLETED&gt;
	-	&lt;http://www.emarolab.it/cluedo-ontology#HYPOTHESIS&gt;
	sparql_queried_objects : 
	---
[ INFO] [1660394742.377993500]: [test_armor_tools] 


 TEST COMPLETO INTERFACCIA 



[ INFO] [1660394742.378055900]: [test_armor_tools] 

	======	TEST GetClassOfIndiv()
[ INFO] [1660394742.378113400]: [test_armor_tools] classe dell&#39;individual Stadium(con la maiuscola, scritto correttamente, no deep search, atteso un solo elemento)
[ INFO] [1660394742.382232000]: [test_armor_tools] 	numero 1 -&gt; PLACE
[ INFO] [1660394742.382303900]: [test_armor_tools] 	numero 2 -&gt; HYPOTHESIS
[ INFO] [1660394742.382366900]: 
[ INFO] [1660394742.382428000]: [test_armor_tools] classe dell&#39;individual Stadium(con la maiuscola, scritto correttamente, usando la deep search, atteso un solo elemento)
[ INFO] [1660394742.387964600]: [test_armor_tools] 	numero 1 -&gt; PLACE
[ INFO] [1660394742.388033600]: 
[ INFO] [1660394742.388091300]: [test_armor_tools] classe dell&#39;individual stadium(senza la maiuscola, sbagliato, no deep search, atteso 0)
[ INFO] [1660394742.393586100]: [test_armor_tools] size==0
[ INFO] [1660394742.393664900]: 
[ INFO] [1660394742.393723200]: [test_armor_tools] 

	======	TEST ExistsIndiv()
[ INFO] [1660394742.397511500]: [test_armor_tools] esiste &#39;stadium&#39; senza la maiuscola? -&gt; no
[ INFO] [1660394742.401432500]: [test_armor_tools] esiste &#39;Stadium&#39; con la maiuscola? -&gt; yes
[ INFO] [1660394742.406154300]: [test_armor_tools] esiste &#39;HP0&#39; ? -&gt; no
[ INFO] [1660394742.406253700]: [test_armor_tools] 

	======	TEST GetIndivOfClass()
[ INFO] [1660394742.406320500]: [test_armor_tools] tutti gli individuals della classe HYPOTHESIS(attesa ... un bel po&#39; di roba)
[ INFO] [1660394742.411050000]: [test_armor_tools] 	numero 1 -&gt; Jim
[ INFO] [1660394742.411111100]: [test_armor_tools] 	numero 2 -&gt; 
[ INFO] [1660394742.411161000]: [test_armor_tools] 	numero 3 -&gt; Study
[ INFO] [1660394742.411212300]: [test_armor_tools] 	numero 4 -&gt; Gun
[ INFO] [1660394742.411269900]: [test_armor_tools] 	numero 5 -&gt; Stadium
[ INFO] [1660394742.411323100]: [test_armor_tools] 	numero 6 -&gt; Lounge
[ INFO] [1660394742.411372600]: [test_armor_tools] 	numero 7 -&gt; HP3
[ INFO] [1660394742.411427000]: 
[ INFO] [1660394742.411487200]: [test_armor_tools] tutti gli individuals della classe PLACE(attesi 3 elementi)
[ INFO] [1660394742.414906100]: [test_armor_tools] 	numero 1 -&gt; Study
[ INFO] [1660394742.414971500]: [test_armor_tools] 	numero 2 -&gt; Stadium
[ INFO] [1660394742.415020800]: [test_armor_tools] 	numero 3 -&gt; Lounge
[ INFO] [1660394742.415078600]: 
[ INFO] [1660394742.415134300]: [test_armor_tools] 

	======	TEST GetValuedOfIndiv()
[ INFO] [1660394742.415210700]: [test_armor_tools] propriet?? where dell&#39;ipotesi HP3(attesi due elementi)
[ INFO] [1660394742.418685800]: [test_armor_tools] 	numero 1 -&gt; Study
[ INFO] [1660394742.418750900]: [test_armor_tools] 	numero 2 -&gt; Stadium
[ INFO] [1660394742.418811100]: 
[ INFO] [1660394742.418866600]: [test_armor_tools] 

	======	TEST RemoveHypothesis()
[ WARN] [1660394742.418928600]: [test_armor_tools] NOTA BENE: il comando REMOVE di aRMOR ?? buggato, non funziona. Per farlo funzionare occorre trovare un workaround nell&#39;interfaccia
[ INFO] [1660394742.418987900]: [test_armor_tools] aggiungo l&#39;ipotesi HPtoremove (uso qui solo comandi dell&#39;interfaccia, non i diretti di aRMOR)
[ INFO] [1660394742.448092200]: [test_armor_tools] esiste &#39;HPtoremove&#39; ? -&gt; yes
[ INFO] [1660394742.448175000]: [test_armor_tools] classe dell&#39;individual HPtoremove? (atteso un solo elemento)
[ INFO] [1660394742.451924800]: [test_armor_tools] 	numero 1 -&gt; HYPOTHESIS
[ INFO] [1660394742.451996600]: [test_armor_tools] rimozione
[ INFO] [1660394742.457330500]: [test_armor_tools] RemoveHypothesis( ) = yes
[ INFO] [1660394742.465532300]: [test_armor_tools] esiste ancora &#39;HPtoremove&#39; ? -&gt; no
[ INFO] [1660394742.465603300]: [test_armor_tools] 

	======	TEST FindCompleteHypotheses()
[ INFO] [1660394742.470117800]: [test_armor_tools] ricerca delle ipotesi complete (atteso: una sola ipotesi, escludendo quella scartata
[ INFO] [1660394742.470200300]: [test_armor_tools] 	numero 1 -&gt; HP3
[ INFO] [1660394742.470265300]: [test_armor_tools] 

	======	TEST FindInconsistentHypotheses()
[ INFO] [1660394742.474777500]: [test_armor_tools] ricerca delle ipotesi inconsistenti (atteso: solo una, o anche due, includendo quella scartata)
[ INFO] [1660394742.474843000]: [test_armor_tools] 	numero 1 -&gt; HP3
[ INFO] [1660394742.597462300]: [test_armor_tools] THAT&#39;S ALL FOLKS!
</pre></div>
</div>
</div>
<div class="section" id="rosplan-pddl-model">
<h3>ROSPlan – PDDL model<a class="headerlink" href="#rosplan-pddl-model" title="Permalink to this heading"></a></h3>
<p><strong>popf output (first goal):</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>root@3b17871017fd:~/ros_ws/src/erl2-new/robocluedo_rosplan/pddl/robocluedo# ./solve_popf.sh 
Number of literals: 28
Constructing lookup tables: [10%] [20%] [30%] [40%] [50%] [60%] [70%] [80%] [90%] [100%] [110%] [120%] [130%] [140%] [150%] [160%] [170%]
Post filtering unreachable actions:  [10%] [20%] [30%] [40%] [50%] [60%] [70%] [80%] [90%] [100%] [110%] [120%] [130%] [140%] [150%] [160%] [170%]
No analytic limits found, not considering limit effects of goal-only operators
64% of the ground temporal actions in this problem are compression-safe
Initial heuristic = 2.000
b (1.000 | 0.990);;;; Solution Found
; States evaluated: 3
; Cost: 0.990
; Time 0.00
0.000: (replan)  [0.990]
</pre></div>
</div>
<p><strong>popf output (second goal):</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>root@3b17871017fd:~/ros_ws/src/erl2-new/robocluedo_rosplan/pddl/robocluedo# ./solve_popf.sh 
Number of literals: 28
Constructing lookup tables: [10%] [20%] [30%] [40%] [50%] [60%] [70%] [80%] [90%] [100%] [110%] [120%] [130%] [140%] [150%] [160%] [170%]
Post filtering unreachable actions:  [10%] [20%] [30%] [40%] [50%] [60%] [70%] [80%] [90%] [100%] [110%] [120%] [130%] [140%] [150%] [160%] [170%]
No analytic limits found, not considering limit effects of goal-only operators
64% of the ground temporal actions in this problem are compression-safe
Initial heuristic = 11.000
b (10.000 | 0.990)b (9.000 | 1.981)b (8.000 | 2.972)b (7.000 | 5.945)b (6.000 | 5.945)b (5.000 | 6.936)b (4.000 | 7.927)b (3.000 | 8.918)b (2.000 | 8.918)b (1.000 | 9.909);;;; Solution Found
; States evaluated: 21
; Cost: 10.900
; Time 0.00
0.000: (replan)  [0.990]
0.991: (move-to center wp1)  [0.990]
1.982: (signal-collect-hint wp1)  [0.990]
2.973: (collect-hint wp1)  [0.990]
3.964: (move-to wp1 wp2)  [0.990]
4.955: (move-to wp2 wp3)  [0.990]
5.946: (signal-collect-hint wp3)  [0.990]
6.937: (collect-hint wp3)  [0.990]
7.928: (move-to wp3 wp4)  [0.990]
8.919: (move-to-center wp4 center)  [0.990]
9.910: (solve)  [0.990]
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h3>simple ROSPlan pipeline<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<p><strong>SHELL 1:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[ INFO] [1660396623.534248300]: KCL: (/rosplan_knowledge_base) Starting a PDDL Knowledge Base
process[popf_planner_interface-5]: started with pid [29974]
process[rosplan_parsing_interface-6]: started with pid [29983]
process[rosplan_plan_dispatcher-7]: started with pid [29987]
[ INFO] [1660396623.553958400]: KCL: (/rosplan_problem_interface) Ready to receive
process[rosplan_interface_replan-8]: started with pid [29995]
process[rosplan_interface_move_to-9]: started with pid [30000]
process[rosplan_interface_signal_collect_hint-10]: started with pid [30005]
process[rosplan_interface_collect_hint-11]: started with pid [30011]
process[rosplan_interface_move_to_center-12]: started with pid [30016]
process[rosplan_interface_solve-13]: started with pid [30021]
[ INFO] [1660396623.605888600]: KCL: (/rosplan_parsing_interface) Ready to receive
[ INFO] [1660396623.625367500]: KCL: (/rosplan_planner_interface) Ready to receive
[ INFO] [1660396623.628658600]: KCL: (/rosplan_knowledge_base) Parsing domain
[ INFO] [1660396623.628842800]: KCL: (/rosplan_knowledge_base) Parsing domain: /root/ros_ws/src/erl2-new/robocluedo_rosplan/pddl/robocluedo/robocluedo_domain.pddl.
[ INFO] [1660396623.629704400]: KCL: (/rosplan_knowledge_base) Parsing initial state
[ INFO] [1660396623.629786800]: KCL: (/rosplan_knowledge_base) Parsing Problem File: /root/ros_ws/src/erl2-new/robocluedo_rosplan/pddl/robocluedo/robocluedo_problem.pddl.
[ INFO] [1660396623.630342900]: KCL: (/rosplan_knowledge_base) Ready to receive
[ INFO] [1660396623.650709100]: KCL: (/popf_planner_interface) Ready to receive
[ INFO] [1660396623.667384500]: KCL: (/rosplan_plan_dispatcher) Ready to receive
[ INFO] [1660396623.676432100]: KCL: (replan) Ready to receive
[ INFO] [1660396623.706270300]: KCL: (signal-collect-hint) Ready to receive
[ INFO] [1660396623.706488200]: KCL: (solve) Ready to receive
[ INFO] [1660396623.727061100]: KCL: (move-to-center) Ready to receive
[ INFO] [1660396623.727229700]: KCL: (collect-hint) Ready to receive
[ INFO] [1660396623.743870700]: KCL: (move-to) Ready to receive
[ INFO] [1660396630.438992500]: KCL: (/rosplan_problem_interface) (OUT.pddl) Generating problem file.
[ INFO] [1660396630.780932100]: KCL: (/rosplan_problem_interface) (OUT.pddl) The problem was generated.
[ INFO] [1660396630.781449900]: KCL: (/rosplan_planner_interface) Problem received.
[ INFO] [1660396632.842210000]: KCL: (/rosplan_planner_interface) (OUT.pddl) Writing problem to file.
[ INFO] [1660396632.842406600]: KCL: (/rosplan_planner_interface) (OUT.pddl) Running: timeout 10 /root/ros_ws/src/ROSPlan/rosplan_planning_system/common/bin/popf -T /root/ros_ws/src/erl2-new/robocluedo_rosplan/pddl/robocluedo/robocluedo_domain.pddl /root/ros_ws/src/erl2-new/robocluedo_rosplan/data/OUT.pddl &gt; /root/ros_ws/src/erl2-new/robocluedo_rosplan/data/plan.pddl
[ INFO] [1660396632.846124800]: KCL: (/rosplan_planner_interface) (OUT.pddl) Planning complete
[ INFO] [1660396632.846216600]: KCL: (/rosplan_planner_interface) (OUT.pddl) Plan was solved.
[ INFO] [1660396632.846425800]: KCL: (/rosplan_parsing_interface) Planner output received.
[ INFO] [1660396634.813932000]: KCL: (/rosplan_parsing_interface) Parsing planner output.
[ INFO] [1660396634.814199200]: KCL: (/rosplan_plan_dispatcher) Plan received.
[ INFO] [1660396636.957165700]: KCL: (/rosplan_plan_dispatcher) Dispatching plan
[ INFO] [1660396636.980670300]: KCL: (/rosplan_plan_dispatcher) Dispatching action [0, replan(), 2.142903, 0.990000]
[ INFO] [1660396636.981163300]: KCL: (replan) action received
[ INFO] [1660396636.981305300]: KCL: (replan) Action completing with probability 1 and duration 1
[ INFO] [1660396637.057456100]: KCL: (/rosplan_plan_dispatcher) Feedback received [0, 1]
[ INFO] [1660396637.057576200]: KCL: (/rosplan_plan_dispatcher) Feedback received [0, 1]
[ INFO] [1660396637.981581400]: KCL: (replan) action completed successfully
[ INFO] [1660396637.990541600]: KCL: (/rosplan_knowledge_base) Removing Fact (dirty,0)
[ INFO] [1660396637.990673000]: KCL: (/rosplan_knowledge_base) Adding fact (not-dirty, 0)
[ INFO] [1660396638.057318500]: KCL: (/rosplan_plan_dispatcher) Feedback received [0, 2]
[ INFO] [1660396638.157326600]: KCL: (/rosplan_plan_dispatcher) Dispatch complete.
</pre></div>
</div>
<p><strong>SHELL 2:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>root@3b17871017fd:~/ros_ws/src/erl2-new# rosservice call /rosplan_problem_interface/problem_generation_server

root@3b17871017fd:~/ros_ws/src/erl2-new# rostopic echo /rosplan_problem_interface/problem_instance -n 1 -p
%time,field.data
1660396631800734996,(define (problem task)
(:domain robocluedo)
(:objects
    center wp1 wp2 wp3 wp4 - waypoint
)
(:init
    (dirty)


    (is-center center)

    (not-is-center wp1)
    (not-is-center wp2)
    (not-is-center wp3)
    (not-is-center wp4)

    (at center)

    (passage center wp1)
    (passage wp1 center)
    (passage center wp4)
    (passage wp4 center)
    (passage wp1 wp2)
    (passage wp2 wp3)
    (passage wp3 wp4)

    (explored center)

    (not-explored wp1)
    (not-explored wp2)
    (not-explored wp3)
    (not-explored wp4)

    (at-center)



    (not-hint-ready)


    (not-hint-collected wp1)
    (not-hint-collected wp2)
    (not-hint-collected wp3)
    (not-hint-collected wp4)

)
(:goal (and
    (not-dirty)
))
)

root@3b17871017fd:~/ros_ws/src/erl2-new# rosservice call /rosplan_planner_interface/planning_server

root@3b17871017fd:~/ros_ws/src/erl2-new# rostopic echo /rosplan_planner_interface/planner_output -p -n 1
%time,field.data
1660396633868040800,0.000: (replan)  [0.990]

root@3b17871017fd:~/ros_ws/src/erl2-new# rosservice call /rosplan_parsing_interface/parse_plan

root@3b17871017fd:~/ros_ws/src/erl2-new# rostopic echo /rosplan_parsing_interface/complete_plan -n 1
plan: 
  - 
    action_id: 0
    plan_id: 0
    name: &quot;replan&quot;
    parameters: []
    duration: 0.9900000095367432
    dispatch_time: 0.0
---
root@3b17871017fd:~/ros_ws/src/erl2-new# rosservice call /rosplan_plan_dispatcher/dispatch_plan &quot;{}&quot; 
success: True
goal_achieved: True
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>???<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<p><strong>SHELL 1:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<p><strong>SHELL 2:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="sphinx-yaml.html" class="btn btn-neutral float-left" title="YAML and Sphinx" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="twist-keyboard.html" class="btn btn-neutral float-right" title="HOW TO – twist keyboard" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Francesco Ganci.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>